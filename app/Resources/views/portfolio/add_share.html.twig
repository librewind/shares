{% extends 'base.html.twig' %}

{% trans_default_domain "labels" %}

{% block body %}
    <div class="container">
        <div class="row">
            <div class="panel panel-default">
                <div class="panel-heading">{{ 'title.add_share'|trans }}</div>
                <div class="panel-body">
                    <form action="{{ path('share_add', {'id': portfolio.id}) }}" method="POST">
                        <div class="form-group">
                            <label>{{ 'form.name'|trans }}</label>
                            <select class="form-control" name="share_id" id="share_id">
                                {% for share in allShares %}
                                    <option value="{{ share.id }}">{{ share.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="procent">{{ 'form.procent'|trans }}</label>
                            <input id="ratio" name="ratio" type="range" min="0" max="{{ maxRatio }}" step="0.01" value="0">
                            <output id="output-ratio" for="ratio" name="level">0</output>
                        </div>
                        <div class="form-group">
                            <button type="submit" class="btn btn-success">{{ 'form.save'|trans }}</button>
                            <a href="{{ path('portfolio_show', {'id': portfolio.id}) }}" class="btn btn-default">{{ 'form.cancel'|trans }}</a>
                        </div>
                        <input type="hidden" name="id" id="portfolio_id" value="{{ portfolio.id }}">
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $(function(){
            var val = $('#ratio').val() * 100;
            var output  = $('#output-ratio');
            output.html(val);

            $('#ratio').change(function(){
                var val = Math.round(this.value * 100);
                output.html(val);
            });
        });
    </script>
{% endblock %}